# -*- SH -*-

# LOAD SH AND BASH FUNCTIONS
source $GT_DIR/sh/functions.sh

# LOAD COLORS VARIABLES
load_colors

# ALLOWS GROUP TO SEE OUR NEW FILES
umask 002

# CUSTOM LIBRARY PATH
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:'/usr/local/lib/'

# CUSTOMIZE THE PATH
export PATH=$GT_DIR/mbin:~/mbin:$PATH

for i in "/usr/local/bin" "/usr/sbin" "/sbin"; do
    echo $PATH | grep -E '(^|:)$i' > /dev/null || PATH=$PATH:$i
done

if require 'java'; then
    JAVA_HOME=/opt/java
    if [ -d $JAVA_HOME ]; then
	PATH=$PATH:$JAVA_HOME/bin
	export JAVA_HOME
    fi
fi

# CUSTOMIZE PATH FOR RUBY
if require 'ruby'; then
    RUBYVERSION_MINOR=$(ruby --version | grep -E -o '[0-9]\.[0-9]\.[0-9]')
    RUBYVERSION_MAJOR=$(echo $RUBYVERSION_MINOR | grep -E -o '[0-9]\.[0-9]')

    GEM_MINOR=$HOME'/.gem/ruby/'$RUBYVERSION_MINOR
    GEM_MAJOR=$HOME'/.gem/ruby/'$RUBYVERSION_MAJOR

    if [ -d $GEM_MINOR ]; then
	GEMBIN_MINOR=$GEM_MINOR'/bin'
	export PATH=$PATH$(test -d $GEMBIN_MINOR && echo :$GEMBIN_MINOR)
	export GEM_PATH=$GEM_MINOR
    elif [ -d $GEM_MAJOR ]; then
	GEMBIN_MAJOR=$GEM_MAJOR'/bin'
	export PATH=$PATH$(test -d $GEMBIN_MAJOR && echo :$GEMBIN_MAJOR)
	export GEM_PATH=$GEM_MAJOR
    fi

    export RUBYOPT="rubygems"
    export RUBYLIB=$RUBYLIB:'/usr/local/lib'
fi

RABBIT_PATH='/usr/lib/erlang/lib/rabbitmq_server-1.5.5/sbin/'
export PATH=$PATH$(test -d $RABBIT_PATH && echo :$RABBIT_PATH)

